<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ben Rochford">

<title>HW11</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="HW11_files/libs/clipboard/clipboard.min.js"></script>
<script src="HW11_files/libs/quarto-html/quarto.js"></script>
<script src="HW11_files/libs/quarto-html/popper.min.js"></script>
<script src="HW11_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="HW11_files/libs/quarto-html/anchor.min.js"></script>
<link href="HW11_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="HW11_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="HW11_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="HW11_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="HW11_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">HW11</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ben Rochford </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="hw11" class="level1">
<h1>HW11</h1>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section"><strong>11.1</strong></h2>
<blockquote class="blockquote">
<p>In the Event Studies chapter we estimated the effect of something that occurs at a specific time by just comparing before-event to after-event, without really using a control group. What assumption is made by no-control-group event studies that we don’t have to make with difference-in-differences?</p>
</blockquote>
<p>In an event study, we have to assume the over time trend in the data is the same before and after the event. In DiD, we just need parallel trends to hold, but we don’t need to assume the trend will be the same before and after the event.</p>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1"><strong>11.2</strong></h2>
<blockquote class="blockquote">
<p>Which of the following potential back doors is controlled for by comparing the treated group to a control group?</p>
<ol type="a">
<li><p>The treated group may be following a trend, unique to the group, that would make the outcome change from before-treatment to after-treatment anyway</p></li>
<li><p><strong>There may be events affecting everyone that would change the outcome from before-treatment to after-treatment anyway (this one)</strong></p></li>
<li><p>There may be differences in typical outcome levels between the treated group and the untreated group</p></li>
<li><p>The decision to treat the treated group, rather than some other group, may be based on factors that are related to the outcome</p></li>
</ol>
</blockquote>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2"><strong>11.3</strong></h2>
<blockquote class="blockquote">
<p>Consider a treatment and control group. Looking only at the pre-treatment period, they have exactly the same outcomes (zero gap between them in each period).</p>
<p>Despite having exactly the same outcomes pre-treatment, it happens to be the case that parallel trends is violated for these two groups. How is this possible? Explain what it means for parallel trends to be violated in this case, or give an example of how it could be violated?</p>
</blockquote>
<p>Parallel trends requires that the two groups would have similar trends both pre and post-treatment. Perhaps the pre-treatment alignment would hold, but the post-treatment alignment would not.</p>
<blockquote class="blockquote">
<p>If we estimate the causal effect in this case using difference-in-differences, even though parallel trends is violated, how much would our effect be off by? (note you won’t be able to give a specific number)</p>
</blockquote>
<p>We would end up underestimating the true causal effect, because the apparent pre-treatment difference in groups is relatively overestimated.</p>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3"><strong>11.4</strong></h2>
<blockquote class="blockquote">
<p>Consider the below graph showing the average outcome for treated and control groups in the lead up to treatment (indicated by the dashed line), and also after treatment</p>
</blockquote>
<p><img src="images/clipboard-4058728314.png" class="img-fluid" width="534"></p>
<ol type="a">
<li><p>Based on the prior trend, does it seem likely that parallel trends holds in this instance?</p>
<p>No, the two groups trends don’t seem very similar, especially in the pre-treatment observations.</p></li>
<li><p>If we estimate difference-in-differences anyway, are we likely to overestimate the actual causal effect, underestimate it, or get it right on average?</p>
<p>We’d underestimate the actual causal effect, because the pre-treatment is overestimated.</p></li>
</ol>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4"><strong>11.5</strong></h2>
<blockquote class="blockquote">
<p>In mid-2020, during the COVID-19 pandemic, different countries pursued different courses of action. Some locked down fully, imposing harsh penalties to most people for leaving the house outside certain proscribed times. Some were looser and only suggested staying at home, and some had hardly any restrictions at all. You notice that COVID rates tend to spike dramatically in different countries at seemingly-random times, and want to know if certain restrictions helped.</p>
<p>From March through May 2020, US and Canada COVID case rates followed similar trends (US rates were higher, but the trends were similar). You want to look at the effect of COVID restrictions enacted in Canada in late May 2020 on case rates. Is DID, with the US as a control group, a good way to estimate this effect? If not, what concerns would you have about this research design?</p>
</blockquote>
<p>Even the fact that the US rates were higher is enough to be concerned that the parallel trends assumption cannot hold here. Especially because infectious disease relies, vaguely speaking, on exponential growth, even a small head start would mean their trends after treatment were going to diverge significantly independent of the policy “treatment” effects.</p>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5"><strong>11.6</strong></h2>
<blockquote class="blockquote">
<p>Consider the below table of mean outcomes, and calculate the difference-in-difference effect of treatment. Write out the equation you used to calculate it (i.e.&nbsp;show how the four numbers in the table are combined to get the estimate)</p>
</blockquote>
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td><strong>Before</strong></td>
<td><strong>After</strong></td>
</tr>
<tr class="even">
<td><strong>Treated</strong></td>
<td>5</td>
<td>9</td>
</tr>
<tr class="odd">
<td><strong>Untreated</strong></td>
<td>6</td>
<td>7.5</td>
</tr>
</tbody>
</table>
<p>Pre-treatment: 5-6 = 1-</p>
<p>Post-treatment: 9-7.5 = 1.5</p>
<p>DiD: 1.5 - (-1) = <strong>2.5</strong></p>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6"><strong>11.7</strong></h2>
<blockquote class="blockquote">
<p>You are planning to estimate whether voter-protection laws increase voter turnout. You note that, in 2015, a lot of new voter-protection laws were enacted in some provinces but not in others. Conveniently, no new laws were enacted in 2012, 2014, or 2016, so you decide to use 2012 and 2014 as your “before” periods and 2016 as “after”.</p>
<ol type="a">
<li><p>Which of the following best describes what you’d want to regress state-and-year level “voter turnout” measures on?</p>
<ol type="i">
<li><p>An indicator for whether the state is treated, and an indicator for whether the year is 2016.</p></li>
<li><p>A set of fixed effects for state, and a set of fixed effects for year.</p></li>
<li><p><strong>An indicator for whether the state is treated, a set of fixed effects for year, and an indicator for whether the state is currently treated. (this one)</strong></p></li>
<li><p>A set of fixed effects for state, and for year, and an interaction between “is 2016” and “is a treated state”.</p></li>
<li><p>This design should not be estimated using a regression.</p></li>
</ol></li>
<li><p>Unless you chose the final option in the previous question, specify which coefficient in that regression would give you the DID estimate.</p></li>
</ol>
</blockquote>
<p>The one of whether the state is currently treated</p>
</section>
<section id="section-7" class="level2">
<h2 class="anchored" data-anchor-id="section-7"><strong>11.8</strong></h2>
<blockquote class="blockquote">
<p>In your own words, describe what is the “two-way fixed effects difference-in-difference estimator.” What does this model assume about the effect of some treatment over time?</p>
</blockquote>
<p>This is the coefficients learned by a regression model with fixed effects for treatment condition and time period, clustered for treatment condition.</p>
</section>
<section id="section-8" class="level2">
<h2 class="anchored" data-anchor-id="section-8"><strong>11.9</strong></h2>
<blockquote class="blockquote">
<p>Consider the below graph with estimates from a dynamic difference-in-differences model for a treatment that occurs between periods 4 and 5, with 95% confidence intervals shown.</p>
</blockquote>
<p><img src="images/clipboard-4103355157.png" class="img-fluid" width="551"></p>
<ol type="a">
<li><p>What about this graph might make us concerned about our identification assumptions?</p>
<p>Since the line represents difference between the treated and non-treated, it’s not a good sign that they are different at the start.</p></li>
<li><p>Ignoring any concerns we have, what would we say is the effect of treatment on Y in this case? (note the height of the line in period 5 is about 3, in period 6 is about 1, and in period 7 is about .5).</p>
<p>Seems like there is a positive treatment effect which gets weaker over time.</p></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>